<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Di√°rio Digital ‚Äî Controle de Presen√ßa</title>
  <link rel="stylesheet" href="/static/css/styles.css">
  <link rel="icon" type="image/png" href="/static/img/LOGO A - NOVO.png">


</head>
<body>
<div class="app" id="app">
  <header>
    <div class="topbar">
      <img src="/static/img/Logo azul.png" alt="Logo Di√°rio Digital" class="logo">
      <div class="brand"><span class="dot"></span> Di√°rio Digital</div>
      <nav class="nav" id="nav"></nav>
      <div id="userBox" class="user"></div>
    </div>
  </header>

  <main>
    <!-- LOGIN -->
    <section id="view-login" class="card fade-in">
      <div class="head">
        <strong>Entrar</strong>
        <span class="muted">Acesse com seu e-mail</span>
      </div>
      <div class="body">
        <form id="loginForm" class="grid cols-2" autocomplete="on">
          <div class="grid">
            <label>E-mail</label>
            <input class="input" type="email" name="email" required placeholder="email@exemplo.com">
          </div>
          <div class="grid">
            <label>Senha</label>
            <input class="input" type="password" name="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
          </div>
          <div class="row" style="grid-column:1/-1;justify-content:space-between">
            <button class="btn primary" type="submit">Entrar</button>
          </div>
        </form>
      </div>
    </section>

    <!-- PRINCIPAL: MEMBROS -->
    <section id="view-members" class="fade-in" hidden>
      <div class="card">
        <div class="head">
          <div class="row">
            <strong>Lista de Membros</strong>
            <span class="badge muted" id="membersCount">0 membros</span>
          </div>

          <div class="toolbar">
            <input class="input" id="memberSearch" placeholder="Pesquisar por nome..." />
            <select id="filterMemberRole">
              <option value="">Todos os cargos</option>
            </select>
            <span id="membersByRoleCount" class="muted">0 membros nesse cargo</span>
            <button class="btn" id="btnNewMember">+ Cadastrar membro</button>
          </div>
        </div>

        <div class="body">
          <div class="muted" style="margin-bottom:10px">
            Colunas: <strong>Nome</strong>, <strong>Cargos</strong>, <strong>Editar situa√ß√£o</strong>
            <br><small>‚ö†Ô∏è Membros em vermelho possuem 3 ou mais faltas n√£o justificadas</small>
          </div>
          <div style="overflow:auto">
            <table id="membersTable">
              <thead>
                <tr><th>Nome do Membro</th><th>Cargos</th><th>Situa√ß√£o</th><th>A√ß√µes</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

   <!-- LISTA DE PRESEN√áA -->
<section id="view-attendance" class="fade-in" hidden>
  <div class="card">
    <div class="head">
      <strong>Lista de Presen√ßa</strong>
      <div class="toolbar">
        <!-- ‚úÖ Campo de calend√°rio no lugar do select -->
        <input 
          type="date" 
          id="attendanceDate" 
          title="Escolha a data da chamada" 
          style="padding:4px"
        />
        <button class="btn" id="btnLoadAttendance">Carregar</button>
        <button class="btn primary" id="btnSaveAttendance">Salvar presen√ßas</button>
      </div>
    </div>
    <div class="body">
      <p class="muted">
        Regra: <em>Licen√ßa</em> aparece aqui como inativo. <em>Afastado</em> n√£o aparece na chamada.
        <br><small>‚ö†Ô∏è Membros em vermelho possuem 3 ou mais faltas n√£o justificadas</small>
      </p>
      <div style="overflow:auto">
        <table id="attendanceTable">
          <thead>
            <tr>
              <th>Nome</th>
              <th>Situa√ß√£o</th>
              <th>Presen√ßa</th>
              <th>Observa√ß√£o</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>
</section>


    <!-- FILTROS DE PRESEN√áA -->
    <section id="view-filters" class="fade-in" hidden>
      <div class="card">
        <div class="head">
          <strong>Filtros de Presen√ßa e An√°lise de Faltas</strong>
          <div class="toolbar">
            <button id="btnRunFilters" class="btn">Aplicar filtros</button>
          </div>
        </div>

        <div class="body">
          <!-- √Årea de filtros -->
          <div class="grid cols-2">
            <input 
              type="date" 
              id="filterDate" 
              title="Filtrar por data espec√≠fica"
              style="padding:4px"
            />
            <div>
              <label>Status de presen√ßa</label>
              <select id="filterPresence">
                <option value="">Todos</option>
                <option value="P">Presente</option>
                <option value="F">Falta</option>
                <option value="FJ">Falta Justificada</option>
              </select>
            </div>
            <div>
              <label>Nome cont√©m</label>
              <input id="filterName" class="input" placeholder="Buscar por nome" />
            </div>
            <div>
              <label>Cargo</label>
              <select id="filterRole" class="input">
                <option value="">Todos os cargos</option>
              </select>
            </div>
            <div>
              <label>Situa√ß√£o</label>
              <select id="filterStatus">
                <option value="">Todas</option>
                <option value="frequente">Frequente</option>
                <option value="afastado">Afastado</option>
                <option value="licenca">Licen√ßa</option>
              </select>
            </div>
          </div>

          <!-- √Årea de contadores -->
          <div class="stats-container">
            <div class="stat-box">
              <strong id="countTotalMembers">0</strong>
              <span>Total de Membros</span>
            </div>
            <div class="stat-box">
              <strong id="countFaltas">0</strong>
              <span>Faltas</span>
            </div>
            <div class="stat-box">
              <strong id="countFaltasJustificadas">0</strong>
              <span>Faltas Justificadas</span>
            </div>
            <div class="stat-box">
              <strong id="countTotalFaltas">0</strong>
              <span>Total de Faltas</span>
            </div>
            <div class="stat-box">
              <strong id="countExcessiveAbsences">0</strong>
              <span>Membros com +3 Faltas</span>
            </div>
            <div class="stat-box">
              <strong id="countMembersByRole">-</strong>
              <span>Membros por Cargo</span>
            </div>
          </div>

          <!-- Lista filtrada -->
          <div style="margin-top:14px;overflow:auto">
            <table id="filtersResult">
              <thead>
                <tr>
                  <th>Data</th>
                  <th>Nome</th>
                  <th>Cargos</th>
                  <th>Situa√ß√£o</th>
                  <th>Presen√ßa</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <!-- Se√ß√£o de An√°lise de Faltas por Membro -->
          <div class="analysis-section">
            <h3 style="margin-top: 0; color: #1e40af;">üìä An√°lise Detalhada de Faltas por Membro</h3>
                        
            <div class="analysis-controls">
              <div>
                <label>Selecionar Membro</label>
                <select id="absenceAnalysisMember" class="input">
                  <option value="">Selecione um membro</option>
                </select>
              </div>
              <div>
                <label>Tipo de An√°lise</label>
                <select id="absenceAnalysisType" class="input">
                  <option value="all-absences">Todas as faltas (por data)</option>
                  <option value="monthly-summary">Resumo mensal</option>
                </select>
              </div>
              <div>
                <button id="btnAnalyzeMemberAbsences" class="btn primary">Analisar</button>
              </div>
            </div>

            <div id="absenceAnalysisSection" class="analysis-results" style="display: none;">
              <h4 id="absenceAnalysisTitle">Resultado da An√°lise</h4>
              <div class="muted" id="absenceAnalysisCount">-</div>
              
              <table id="absenceAnalysisResult" style="margin-top: 12px;">
                <thead>
                  <tr>
                    <th>Data/Per√≠odo</th>
                    <th>Tipo/Total</th>
                    <th>Detalhes</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>

              
              <table id="absenceAnalysisResult" style="margin-top: 12px;">
                <thead>
                  <tr>
                    <th>Data/Per√≠odo</th>
                    <th>Tipo/Total</th>
                    <th>Detalhes</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </section>

  </main>

  <footer>
    <small>¬© 2025 Di√°rio Digital. Desenvolvido por <a href="https://karythongomes.com.br"><strong>GomesTechnology</strong></a>.</small>
  </footer>
</div>

<!-- DIALOG: NOVO/EDITAR MEMBRO -->
<dialog id="memberDialog">
  <form method="dialog" id="memberForm" class="grid" style="padding:18px">
    <h3 id="memberDialogTitle" style="margin:0">Cadastrar membro</h3>
    <input type="hidden" id="memberId" />
    <div class="grid">
      <label>Nome</label>
      <input id="memberName" class="input" required placeholder="Nome completo" />
    </div>
    <div class="grid">
      <label>Cargos (selecione um ou mais)</label>
      <div id="rolesArea" class="row" style="gap:10px;flex-wrap:wrap"></div>
    </div>
    <div class="grid">
      <label>Situa√ß√£o</label>
      <select id="memberStatus">
        <option value="frequente">Frequente</option>
        <option value="afastado">Afastado</option>
        <option value="licenca">Licen√ßa</option>
      </select>
    </div>
    <div class="row" style="justify-content:flex-end;margin-top:8px">
      <button type="button" id="btnCancelMember" class="btn ghost" value="cancel">Cancelar</button>
      <button class="btn primary" value="default">Salvar</button>
    </div>
  </form>
</dialog>

<!-- MODAL: Cadastro de Usu√°rio -->
<dialog id="userDialog">
  <form id="formCadastro" method="dialog" class="grid" style="padding:18px">
    <h3 id="userDialogTitle" style="margin:0">Cadastrar Usu√°rio</h3>
    <div class="grid">
      <label>Nome</label>
      <input id="nome" class="input" required placeholder="Digite o nome" />
    </div>
    <div class="grid">
      <label>E-mail</label>
      <input id="userEmail" class="input" type="email" required placeholder="voce@exemplo.com" />
    </div>
    <div class="grid">
      <label>Senha</label>
      <input id="userPassword" class="input" type="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
    </div>
    <div class="row" style="justify-content:flex-end;margin-top:8px">
      <button class="btn primary" type="submit">Salvar</button>
      <button class="btn ghost" type="button" id="btnCancelar">Cancelar</button>
    </div>
  </form>
</dialog>
<script src="/static/js/script.js"></script>


</body>
</html>